import{r as a,u as b,j as e,a as E,A as C,O as y}from"./index-rilr9HwR.js";function D(){const o=["ADL","BNE","DRW","HBA","MEL","PER","SYD","WOL"],[i,x]=a.useState(""),[r,g]=a.useState(""),[n,m]=a.useState(""),[c,j]=a.useState(1),[u,v]=a.useState(!1),S=b(),h=async()=>{var d,p;if(!i||!r||!n||n===r)return;const s={numPassengers:c,isRoundTrip:u},f={from:n,to:r,date:i};try{const t=await E.post("/api/flights",s);t.status>=200&&t.status<300?(console.log("Session data saved successfully:",t.data),S({to:"/booking/search",search:f})):alert(`Failed to save search details. Server responded with status: ${t.status}`)}catch(t){console.error("Error saving session data via POST:",t);let l="An error occurred while saving search details.";t instanceof C&&((p=(d=t.response)==null?void 0:d.data)!=null&&p.error)?l=`Error: ${t.response.data.error}`:t instanceof Error&&(l=`Error: ${t.message}`),alert(l)}};return e.jsxs("div",{children:[e.jsx("h1",{children:"Flight Search"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),h()},children:[e.jsxs("label",{children:["From:",e.jsxs("select",{value:n,onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"",children:"Select a location"}),o.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("label",{children:["To:",e.jsxs("select",{value:r,onChange:s=>g(s.target.value),children:[e.jsx("option",{value:"",children:"Select a location"}),o.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("label",{children:["Date:",e.jsx("input",{type:"date",value:i,onChange:s=>x(s.target.value)})]}),e.jsxs("label",{children:["Number of Passengers:",e.jsx("input",{type:"number",value:c,onChange:s=>j(Number(s.target.value)),min:1,max:6})]}),e.jsxs("label",{children:["Round Trip:",e.jsx("input",{type:"checkbox",checked:u,onChange:s=>v(s.target.checked)})]}),e.jsx("button",{type:"submit",children:"Search"})]}),e.jsx("button",{onClick:h,children:"Search Flights"})]})}const P=function(){return e.jsxs(e.Fragment,{children:["Content in the root route goes here test",e.jsx(y,{}),e.jsx(D,{})]})};export{P as component};
